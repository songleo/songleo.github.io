---
layout: post
title: ci/cd工作流
date: 2023-10-23 00:12:05
---

持续集成 (ci)：开发人员会频繁地将代码更改合并到主分支。每次合并都伴随着自动化测试，确保代码的质量和稳定性。

持续部署 (cd)：代码通过所有测试后，它会被自动部署到生产环境，使得新特性、修复等更快地达到用户手中。

具体的ci/cd工作流如下：

- 开发人员在自己的分支上进行功能开发和bug修复
- 完成开发后，代码将被提交到git这样的版本控制系统中
- 一旦代码被提交，ci/cd的自动化流程开始。例如，jenkins这样的工具会拉取新的更改并准备进行一系列的检查和测试
- 使用工具如sonarqube进行代码的静态分析，确保代码的质量满足团队的标准
- 运行单元测试，确保代码的每一个部分都按预期工作
- 代码静态分析，进一步确保代码的健壮性，查找潜在的错误或不良实践
- 构建应用镜像
- 安全扫描，使用工具来检测代码中的安全隐患，如依赖漏洞扫描，镜像漏洞扫描等
- 当上述流程都完成后，会进行人工审查。审查通过后，代码将被合并到主分支
- 代码合并后，会再次进行构建和全面的测试，如单元测试，集成测试，性能测试等等
- 构建镜像并push到镜像仓库
- 将镜像部署到k8s集群，完成应用部署
